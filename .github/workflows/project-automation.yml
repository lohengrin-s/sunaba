# .github/workflows/project-automation.yml
name: Move Issue in Project

on:
  issues:
    types: [opened, labeled, edited, reopend]

jobs:
  move-issue:
    runs-on: ubuntu-latest
    environment: ActionsSecret
    steps:
      - name: Move issue to appropriate project column
        uses: actions/github-script@v7
        env:
          GH_TOKEN: ${{ secrets.API_TOKEN }}
        with:
          script: |
            const result = await github.graphql(`
              query {
                repository(owner: "leexei", name: "sunaba") {
                  projectsV2(first: 10) {
                    nodes {
                      id
                      title
                    }
                  }
                }
              }
            `);
            console.log("Projects:", result.repository.projectsV2.nodes);